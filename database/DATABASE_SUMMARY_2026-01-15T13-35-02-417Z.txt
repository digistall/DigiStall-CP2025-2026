============================================================
DATABASE STRUCTURE SUMMARY
Exported: 2026-01-15T13:46:09.792Z
============================================================

TABLES:
  - applicant (9 rows)
  - applicant_documents (18 rows)
  - application (8 rows)
  - assigned_location (2 rows)
  - auction (0 rows)
  - auction_bids (0 rows)
  - auction_result (0 rows)
  - branch (3 rows)
  - branch_document_requirements (16 rows)
  - branch_document_requirements_backup (0 rows)
  - business_employee (3 rows)
  - business_information (8 rows)
  - business_manager (2 rows)
  - business_owner_managers (2 rows)
  - business_owner_subscriptions (0 rows)
  - collector (3 rows)
  - collector_action_log (0 rows)
  - collector_assignment (0 rows)
  - complaint (3 rows)
  - credential (2 rows)
  - daily_payment (0 rows)
  - document_types (15 rows)
  - employee_activity_log (0 rows)
  - employee_credential_log (0 rows)
  - employee_email_template (2 rows)
  - employee_password_reset (0 rows)
  - employee_session (1 rows)
  - encryption_keys (0 rows)
  - floor (3 rows)
  - inspector (3 rows)
  - inspector_action_log (9 rows)
  - inspector_assignment (2 rows)
  - migrations (18 rows)
  - other_information (12 rows)
  - payment_status_log (0 rows)
  - payments (1 rows)
  - penalty_payments (0 rows)
  - procedure_backup (479 rows)
  - raffle (0 rows)
  - raffle_auction_log (0 rows)
  - raffle_participants (0 rows)
  - raffle_result (0 rows)
  - section (5 rows)
  - spouse (3 rows)
  - staff_activity_log (29 rows)
  - staff_session (102 rows)
  - stall (8 rows)
  - stall_applications (0 rows)
  - stall_business_owner (1 rows)
  - stall_images (21 rows)
  - stallholder (2 rows)
  - stallholder_document_submissions (0 rows)
  - stallholder_documents (2 rows)
  - subscription_payments (0 rows)
  - subscription_plans (3 rows)
  - system_administrator (1 rows)
  - vendor (0 rows)
  - vendor_business (0 rows)
  - vendor_child (0 rows)
  - vendor_documents (0 rows)
  - vendor_spouse (1 rows)
  - violation (3 rows)
  - violation_penalty (11 rows)
  - violation_report (2 rows)

STORED PROCEDURES:
  - addInspector
  - addOnsitePayment
  - checkComplianceRecordExists
  - checkExistingApplication
  - checkExistingMobileUser
  - checkPendingApplication
  - checkStallAvailability
  - countBranchApplications
  - createApplicant
  - createApplicantComplete
  - createApplication
  - createBranch
  - createBusinessEmployee
  - createBusinessEmployee_Encrypted
  - createBusinessOwnerWithManagerConnection
  - createCollector
  - createCollector_Encrypted
  - createComplaint
  - createComplianceRecord
  - createFloor
  - createInspector_Encrypted
  - createSection
  - createStallholder
  - createStallholder_Encrypted
  - createVendorWithRelations
  - deleteApplicant
  - deleteApplication
  - deleteBranch
  - deleteComplaint
  - deleteComplianceRecord
  - deleteFloor
  - deleteSection
  - deleteVendorWithRelations
  - getAllActiveBranches
  - getAllActiveInspectors
  - getAllApplicantsDecrypted
  - getAllApplications
  - getAllBranchesDetailed
  - getAllBusinessEmployees
  - getAllComplaintsDecrypted
  - getAllComplianceRecordsDecrypted
  - getAllSubscriptionPlans
  - getAllVendorsWithRelations
  - getAllViolationTypes
  - getApplicantAdditionalInfo
  - getApplicantApplicationsDetailed
  - getApplicantByEmail
  - getApplicantById
  - getApplicantComplete
  - getApplicationsByApplicant
  - getAppliedAreasByApplicant
  - getAvailableStallsByApplicant
  - getBusinessEmployeeById
  - getBusinessEmployeeByUsername
  - getBusinessEmployeesByBranch
  - getBusinessManagerByUsername
  - getBusinessOwnerPaymentHistory
  - getBusinessOwnerSubscription
  - getComplaintById
  - getComplianceRecordById
  - getComplianceRecordByIdDecrypted
  - getComplianceStatistics
  - getEmailTemplate
  - getMobileApplicationStatus
  - getMobileUserApplications
  - getStallBusinessOwnerByUsernameLogin
  - getStallholderBranchId
  - getStallholderById
  - getStallholdersByBranch
  - getStallholdersByBranchDecrypted
  - getStallsFiltered
  - getStallWithBranchInfo
  - getUnpaidViolationsByStallholder
  - getVendorWithRelations
  - getViolationHistoryByStallholder
  - getViolationPenaltiesByViolationId
  - loginBusinessEmployee
  - registerMobileUser
  - registerMobileUser_Encrypted
  - removeBranchDocumentRequirement
  - reportStallholder
  - resetBusinessEmployeePassword
  - revokeAllUserTokens
  - sp_addBranchDocumentRequirement
  - sp_addStallImage
  - sp_approvePayment
  - sp_autoLogoutBusinessEmployee
  - sp_autoLogoutBusinessManager
  - sp_autoLogoutCollector
  - sp_autoLogoutInspector
  - sp_checkApplicantAreaAccess
  - sp_checkApplicantExists
  - sp_checkBusinessEmployeeExists
  - sp_checkBusinessManagerExists
  - sp_checkBusinessOwnerExists
  - sp_checkCollectorEmailExists
  - sp_checkCollectorTableExists
  - sp_checkDocumentExistsForDelete
  - sp_checkExistingApplicantDocument
  - sp_checkExistingApplicantDocumentMulter
  - sp_checkExistingDocumentSubmission
  - sp_checkExistingStallholderDocument
  - sp_checkExistingSubmission
  - sp_checkImageExistsById
  - sp_checkInspectorEmailExists
  - sp_checkStallExists
  - sp_checkStallExistsById
  - sp_checkStallExistsInSection
  - sp_checkStallExistsWeb
  - sp_checkStallholderExists
  - sp_checkStallImageById
  - sp_checkStallImageExists
  - sp_checkSystemAdminExists
  - sp_checkUsernameExists
  - sp_clearAllActivityLogs
  - sp_countBranchApplications
  - sp_countBranchApplicationsForApplicant
  - sp_countManagersForBranch
  - sp_countStaffActivities
  - sp_countStaffActivityById
  - sp_createApplicantEncrypted
  - sp_createBranchManagerEncrypted
  - sp_createCollectorAssignmentDirect
  - sp_createCollectorDirect
  - sp_createCollectorDirect_Encrypted
  - sp_createCollectorEncrypted
  - sp_createCredential
  - sp_createInspectorAssignmentDirect
  - sp_createInspectorDirect
  - sp_createInspectorDirect_Encrypted
  - sp_createInspectorEncrypted
  - sp_createOrUpdateEmployeeSession
  - sp_createSpouseEncrypted
  - sp_createStallholderEncrypted
  - sp_declinePayment
  - sp_deleteApplicantCascade
  - sp_deleteApplicantDocumentBlob
  - sp_deleteStallholderDocument
  - sp_deleteStallImage
  - sp_deleteStall_complete
  - sp_encryptAllSensitiveData
  - sp_encryptAllUserData
  - sp_encryptApplicantData
  - sp_encryptBusinessEmployeeData
  - sp_encryptBusinessManagerData
  - sp_encryptCollectorData
  - sp_encryptEmployeeData
  - sp_encryptExistingStaffData
  - sp_encryptInspectorData
  - sp_encryptSpouseData
  - sp_encryptStallholderData
  - sp_encrypt_all_applicants
  - sp_encrypt_all_business_employees
  - sp_encrypt_all_business_managers
  - sp_encrypt_all_collectors
  - sp_encrypt_all_inspectors
  - sp_encrypt_all_spouses
  - sp_encrypt_all_stallholders
  - sp_encrypt_stallholder
  - sp_endEmployeeSession
  - sp_ensureComplaintTableExists
  - sp_generate_receipt_number
  - sp_getActiveRefreshToken
  - sp_getActivitySummaryByAction
  - sp_getActivitySummaryByType
  - sp_getAdminById
  - sp_getAllApplicantDocuments
  - sp_getAllApplicantDocumentsWithData
  - sp_getAllApplicantsDecrypted
  - sp_getAllCollectors
  - sp_getAllCollectorsDecrypted
  - sp_getAllCredentials
  - sp_getAllEmployeesAll
  - sp_getAllEmployeesByBranches
  - sp_getAllInspectorsDecrypted
  - sp_getAllParticipants
  - sp_getAllPaymentsByStallholder
  - sp_getAllSections
  - sp_getAllSpousesDecrypted
  - sp_getAllStaffActivities
  - sp_getAllStallholdersAll
  - sp_getAllStallholdersAllDecrypted
  - sp_getAllStallholdersByBranchesDecrypted
  - sp_getAllStallImages
  - sp_getAllStallImagesWithData
  - sp_getAllStallsForLanding
  - sp_getAllStalls_complete
  - sp_getAllStalls_complete_decrypted
  - sp_getApplicantById
  - sp_getApplicantByIdDecrypted
  - sp_getApplicantDetailsForComplaintDecrypted
  - sp_getApplicantDocumentBlob
  - sp_getApplicantDocumentBlobById
  - sp_getApplicantDocumentByTypeExtended
  - sp_getAppliedAreasForApplicant
  - sp_getAvailableAreas
  - sp_getAvailableAreasForApplicant
  - sp_getAvailableMarkets
  - sp_getAvailableStallsForApplicant
  - sp_getBranchById
  - sp_getBranchDocRequirementsFull
  - sp_getBranches
  - sp_getBranchIdForEmployee
  - sp_getBranchIdForManager
  - sp_getBranchIdsForOwner
  - sp_getBranchInfoWithManager
  - sp_getBranchManagerById
  - sp_getBranchManagerByUsername
  - sp_getBranchManagerForCurrentUser
  - sp_getBusinessEmployeeByUsername
  - sp_getBusinessEmployeesAllDecrypted
  - sp_getBusinessEmployeesByBranchDecrypted
  - sp_getBusinessEmployeeWithBranch
  - sp_getBusinessInfoByApplicantId
  - sp_getBusinessManagerByUsername
  - sp_getBusinessManagersAllDecrypted
  - sp_getBusinessManagerWithBranch
  - sp_getCollectorBranchAssignment
  - sp_getCollectorByIdDecrypted
  - sp_getCollectorByUsername
  - sp_getCollectorsAll
  - sp_getCollectorsAllDecrypted
  - sp_getCollectorsByBranch
  - sp_getCollectorsByBranchDecrypted
  - sp_getCollectorsForMobileDecrypted
  - sp_getComplaintsByStallholderDecrypted
  - sp_getCredentialWithApplicant
  - sp_getDecryptedApplicant
  - sp_getDecryptedBusinessManager
  - sp_getDecryptedCollectorForLogin
  - sp_getDecryptedEmployee
  - sp_getDecryptedEmployeeForLogin
  - sp_getDecryptedInspectorForLogin
  - sp_getDecryptedStallholder
  - sp_getDecryptedStallholderFull
  - sp_getDocumentById
  - sp_getDocumentsByStallholderId
  - sp_getDocumentTypeByName
  - sp_getEmployeeWithBranchInfo
  - sp_getFilteredStalls
  - sp_getFloorsByBranch
  - sp_getFloorsByBranches
  - sp_getFullStallholderInfo
  - sp_getInspectorBranchAssignment
  - sp_getInspectorByIdDecrypted
  - sp_getInspectorByUsername
  - sp_getInspectorsAll
  - sp_getInspectorsAllDecrypted
  - sp_getInspectorsByBranch
  - sp_getInspectorsByBranchDecrypted
  - sp_getInspectorsForMobileDecrypted
  - sp_getLandingPageFilterOptions
  - sp_getLandingPageStallholdersList
  - sp_getLandingPageStallsList
  - sp_getLandingPageStats
  - sp_getLatestApplicationByApplicantId
  - sp_getLatestApplicationInfo
  - sp_getLocationsByArea
  - sp_getMobileUserByUsername
  - sp_getMostActiveStaff
  - sp_getNextStallImageOrder
  - sp_getNextStallImageOrderMobile
  - sp_getOnlinePaymentsAllDecrypted
  - sp_getOnlinePaymentsByBranchesDecrypted
  - sp_getOnlinePaymentsDecrypted
  - sp_getOnsitePaymentsAll
  - sp_getOnsitePaymentsAllDecrypted
  - sp_getOnsitePaymentsByBranches
  - sp_getOnsitePaymentsByBranchesDecrypted
  - sp_getOnsitePaymentsDecrypted
  - sp_getOtherInfoByApplicantId
  - sp_getPaymentCountByStallholder
  - sp_getPaymentsByStallholderPaginated
  - sp_getPaymentStatsAll
  - sp_getPaymentStatsByBranches
  - sp_getPaymentSummaryByStallholder
  - sp_getRecentFailedActions
  - sp_getRefreshTokenByHash
  - sp_getRemainingImagesForReorder
  - sp_getRemainingStallImages
  - sp_getSectionsByBranch
  - sp_getSectionsByBranches
  - sp_getSpouseByApplicantId
  - sp_getStaffActivityById
  - sp_getStallByIdForLanding
  - sp_getStallDetailForApplicant
  - sp_getStallFirstImage
  - sp_getStallholderByApplicantId
  - sp_getStallholderByIdDecrypted
  - sp_getStallholderDetailByIdWithBranch
  - sp_getStallholderDetailsForComplaintDecrypted
  - sp_getStallholderDocumentBlob
  - sp_getStallholderDocumentBlobById
  - sp_getStallholderDocumentSubmissionBlob
  - sp_getStallholderIdByApplicant
  - sp_getStallholderStallsForDocuments
  - sp_getStallholderUploadedDocuments
  - sp_getStallIdFromImage
  - sp_getStallImageById
  - sp_getStallImageByOrder
  - sp_getStallImageByPosition
  - sp_getStallImageCount
  - sp_getStallImageCountMobile
  - sp_getStallImageDataById
  - sp_getStallImageForDelete
  - sp_getStallImageInfoById
  - sp_getStallImages
  - sp_getStallImagesPublic
  - sp_getStallImagesWithData
  - sp_getStallPrimaryImage
  - sp_getStallsByAreaForApplicant
  - sp_getStallsByAreaOrBranch
  - sp_getStallsByLocation
  - sp_getStallsByTypeForApplicant
  - sp_getSystemAdminById
  - sp_getSystemAdminByUsername
  - sp_getViolationTypes
  - sp_get_all_stallholders_decrypted
  - sp_get_applicants_decrypted
  - sp_get_business_employees_decrypted
  - sp_get_business_managers_decrypted
  - sp_get_collectors_decrypted
  - sp_get_inspectors_decrypted
  - sp_get_spouses_decrypted
  - sp_get_stallholders_decrypted
  - sp_get_stallholder_details_decrypted
  - sp_heartbeatBusinessEmployee
  - sp_heartbeatBusinessManager
  - sp_heartbeatBusinessOwner
  - sp_heartbeatCollector
  - sp_heartbeatInspector
  - sp_heartbeatSystemAdmin
  - sp_insertApplicantDocumentBlob
  - sp_insertApplicantDocumentMulter
  - sp_insertApplicantEncrypted
  - sp_insertAuctionRecord
  - sp_insertAuctionResult
  - sp_insertBusinessManagerEncrypted
  - sp_insertComplaint
  - sp_insertDocumentSubmissionBlob
  - sp_insertEmployeeEncrypted
  - sp_insertRaffleRecord
  - sp_insertRaffleResult
  - sp_insertStaffActivityLog
  - sp_insertStallFull
  - sp_insertStallholderDocumentBlob
  - sp_insertStallImageBlob
  - sp_insertStallImageBlobMobile
  - sp_logCollectorAction
  - sp_logInspectorAction
  - sp_logoutEmployee
  - sp_logStaffActivity
  - sp_logStaffActivityLogin
  - sp_logStaffActivityLogout
  - sp_logTokenActivity
  - sp_mobileStaffLogin
  - sp_resetCollectorPassword
  - sp_resetInspectorPassword
  - sp_reviewStallholderDocument
  - sp_revokeRefreshTokenByHash
  - sp_searchStallsForApplicant
  - sp_setFirstImageAsPrimary
  - sp_setImageAsPrimary
  - sp_setNextPrimaryImage
  - sp_setStallImagePrimary
  - sp_setStallPrimaryImage
  - sp_storeRefreshToken
  - sp_terminateCollector
  - sp_terminateEmployee
  - sp_terminateInspector
  - sp_unsetAllPrimaryImages
  - sp_unsetStallPrimaryImages
  - sp_unsetStallPrimaryImagesMobile
  - sp_updateApplicantDocumentBlob
  - sp_updateApplicantDocumentMulter
  - sp_updateApplicantDocumentVerification
  - sp_updateApplicantEncrypted
  - sp_updateBusinessEmployeeLastLoginNow
  - sp_updateBusinessEmployeeLastLogout
  - sp_updateBusinessEmployeeLastLogoutNow
  - sp_updateBusinessManagerLastLoginNow
  - sp_updateBusinessManagerLastLogout
  - sp_updateBusinessManagerLastLogoutNow
  - sp_updateBusinessOwnerLastLoginNow
  - sp_updateBusinessOwnerLastLogout
  - sp_updateBusinessOwnerLastLogoutNow
  - sp_updateCollectorLastLogin
  - sp_updateCredentialLastLogout
  - sp_updateDocumentSubmissionBlob
  - sp_updateImageDisplayOrder
  - sp_updateInspectorLastLogin
  - sp_updateRefreshTokenLastUsed
  - sp_updateStallholderDocumentBlob
  - sp_updateStallholderDocumentVerification
  - sp_updateStallholderEncrypted
  - sp_updateStallImageBlob
  - sp_updateStallImageBlobData
  - sp_updateStallImageOrder
  - sp_updateSystemAdminLastLoginNow
  - sp_updateSystemAdminLastLogout
  - sp_uploadStallholderDocument
  - sp_validateFloorSectionBranch
  - sp_verifyStallExistsMobile
  - updateApplicantComplete
  - updateBusinessEmployee
  - updateCollector
  - updateCredentialLastLogin
  - updateInspector
  - updateVendorWithRelations

FUNCTIONS:
  - fn_decrypt
  - fn_decrypt_stallholder_name
  - fn_encrypt
  - fn_getEncryptionKey
  - fn_getPhilippineTime
  - fn_philippine_now

TRIGGERS:

EVENTS:
  - reset_monthly_payment_status (RECURRING)

VIEWS:
  - active_auctions_view
  - active_raffles_view
  - penalty_payments_view
  - stalls_with_raffle_auction_view
  - view_applicant_documents_by_owner
  - view_applicant_required_documents
  - view_compliance_records
  - view_compliant_stallholders
  - view_inspector_activity_log
  - view_violation_penalty