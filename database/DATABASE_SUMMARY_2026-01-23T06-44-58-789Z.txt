════════════════════════════════════════════════════════════════
DATABASE STRUCTURE SUMMARY
Exported: 2026-01-23T06:45:01.543Z
════════════════════════════════════════════════════════════════

TABLES:
  - applicant (1 rows)
  - applicant_documents (3 rows)
  - application (1 rows)
  - assigned_location (0 rows)
  - auction (2 rows)
  - auction_bids (0 rows)
  - auction_participants (2 rows)
  - auction_result (0 rows)
  - branch (1 rows)
  - branch_document_requirements (6 rows)
  - branch_document_requirements_backup (0 rows)
  - branch_manager (0 rows)
  - business_employee (1 rows)
  - business_information (1 rows)
  - business_manager (1 rows)
  - business_owner_managers (0 rows)
  - business_owner_subscriptions (2 rows)
  - collector (1 rows)
  - collector_action_log (2 rows)
  - collector_assignment (2 rows)
  - complaint (4 rows)
  - credential (1 rows)
  - daily_payment (0 rows)
  - document_types (15 rows)
  - employee_activity_log (0 rows)
  - employee_credential_log (0 rows)
  - employee_email_template (4 rows)
  - employee_password_reset (0 rows)
  - employee_session (0 rows)
  - encryption_keys (2 rows)
  - floor (3 rows)
  - inspector (1 rows)
  - inspector_action_log (0 rows)
  - inspector_assignment (2 rows)
  - migrations (0 rows)
  - other_information (1 rows)
  - payment_status_log (0 rows)
  - payments (1 rows)
  - penalty_payments (1 rows)
  - raffle (1 rows)
  - raffle_auction_log (0 rows)
  - raffle_participants (1 rows)
  - raffle_result (0 rows)
  - section (3 rows)
  - spouse (1 rows)
  - staff_activity_log (43 rows)
  - staff_session (26 rows)
  - stall (4 rows)
  - stall_applications (0 rows)
  - stall_business_owner (1 rows)
  - stall_images (9 rows)
  - stallholder (1 rows)
  - stallholder_document_submissions (0 rows)
  - stallholder_documents (4 rows)
  - subscription_payment_receipts (0 rows)
  - subscription_payments (0 rows)
  - subscription_plans (4 rows)
  - system_administrator (1 rows)
  - vendor (0 rows)
  - vendor_business (0 rows)
  - vendor_child (0 rows)
  - vendor_documents (0 rows)
  - vendor_spouse (0 rows)
  - violation (5 rows)
  - violation_penalty (22 rows)
  - violation_report (2 rows)

VIEWS:
  - penalty_payments_view
  - view_available_stalls
  - view_violation_penalty

STORED PROCEDURES:
  - addBranchDocumentRequirement
  - addStallImage
  - approveApplication
  - assignManagerToBranch
  - createApplicantComplete
  - createBranchForOwner
  - createBranchManager
  - createBusinessEmployee
  - createBusinessManager
  - createBusinessOwner
  - createBusinessOwnerWithSubscription
  - createCollector
  - createFloor
  - createInspector
  - createSection
  - createSpouse
  - createStall
  - deleteFloor
  - deleteSection
  - deleteStall
  - deleteStallImage
  - getAllActiveBranches
  - getAllApplicants
  - getAllBranches
  - getAllBranchesDetailed
  - getAllBranchManagers
  - getAllBusinessEmployees
  - getAllBusinessManagers
  - getAllBusinessOwnersWithSubscription
  - getAllCollectors
  - getAllComplaints
  - getAllComplaintsDecrypted
  - getAllComplianceRecordsDecrypted
  - getAllInspectors
  - getAllPayments
  - getAllSpouses
  - getAllStallholders
  - getAllStalls
  - getAllSubscriptionPlans
  - getApplicantAdditionalInfo
  - getApplicantApplicationsDetailed
  - getApplicantByUsername
  - getAppliedAreasByApplicant
  - getAvailableStalls
  - getAvailableStallsByApplicant
  - getBranchById
  - getBranchDocumentRequirements
  - getBranchesForOwner
  - getBusinessEmployeeByEmail
  - getBusinessEmployeeById
  - getBusinessEmployeeByUsername
  - getBusinessEmployeesByBranch
  - getBusinessManagerByEmail
  - getBusinessManagerByUsername
  - getBusinessOwnerByEmail
  - getBusinessOwnerByUsername
  - getBusinessOwnerSubscription
  - getCollectorByEmail
  - getCollectorById
  - getCollectorByUsername
  - getCollectorsByBranch
  - getComplaintById
  - getComplaintsByBranch
  - getEmployeesByBranches
  - getFloorsByBranch
  - getInspectorByEmail
  - getInspectorById
  - getInspectorByUsername
  - getInspectorsByBranch
  - getLandingPageStalls
  - getLandingPageStats
  - getMobileUserByUsername
  - getOnsitePaymentsByBranches
  - getPaymentsByStallholder
  - getPaymentStatsByBranches
  - getPenaltyPaymentsByBranches
  - getSectionsByBranch
  - getSpouseByApplicantId
  - getStallById
  - getStallholderByEmail
  - getStallholderById
  - getStallholderByIdDecrypted
  - getStallholdersByBranchDecrypted
  - getStallImageData
  - getStallImages
  - getStallsByBranch
  - getSystemAdminByEmail
  - getSystemAdminByUsername
  - getSystemAdminDashboardStats
  - getUnpaidViolationsByStallholder
  - getViolationHistoryByStallholder
  - getViolationsByInspector
  - processViolationPayment
  - recordSubscriptionPayment
  - rejectApplication
  - reportStallholder
  - reportViolation
  - setBranchDocumentRequirement
  - sp_addBranchDocumentRequirement
  - sp_addStallImage
  - sp_approvePayment
  - sp_autoLogoutBusinessEmployee
  - sp_autoLogoutBusinessManager
  - sp_autoLogoutCollector
  - sp_autoLogoutInspector
  - sp_checkApplicantAreaAccess
  - sp_checkApplicantExists
  - sp_checkBusinessEmployeeExists
  - sp_checkBusinessManagerExists
  - sp_checkBusinessOwnerExists
  - sp_checkCollectorEmailExists
  - sp_checkCollectorTableExists
  - sp_checkDocumentExistsForDelete
  - sp_checkExistingApplicantDocument
  - sp_checkExistingApplicantDocumentMulter
  - sp_checkExistingDocumentSubmission
  - sp_checkExistingStallholderDocument
  - sp_checkExistingSubmission
  - sp_checkImageExistsById
  - sp_checkInspectorEmailExists
  - sp_checkStallExists
  - sp_checkStallExistsById
  - sp_checkStallExistsInSection
  - sp_checkStallExistsWeb
  - sp_checkStallholderExists
  - sp_checkStallImageById
  - sp_checkStallImageExists
  - sp_checkSystemAdminExists
  - sp_checkUsernameExists
  - sp_clearAllActivityLogs
  - sp_countBranchApplications
  - sp_countBranchApplicationsForApplicant
  - sp_countManagersForBranch
  - sp_countStaffActivities
  - sp_countStaffActivityById
  - sp_createApplicantEncrypted
  - sp_createBranchManagerEncrypted
  - sp_createCollectorAssignmentDirect
  - sp_createCollectorDirect
  - sp_createCollectorDirect_Encrypted
  - sp_createCollectorEncrypted
  - sp_createCredential
  - sp_createInspectorAssignmentDirect
  - sp_createInspectorDirect
  - sp_createInspectorDirect_Encrypted
  - sp_createInspectorEncrypted
  - sp_createOrUpdateEmployeeSession
  - sp_createSpouseEncrypted
  - sp_createStaffSession
  - sp_createStallholderEncrypted
  - sp_declinePayment
  - sp_deleteApplicantCascade
  - sp_deleteApplicantDocumentBlob
  - sp_deleteStallholderDocument
  - sp_deleteStallImage
  - sp_deleteStall_complete
  - sp_encryptAllSensitiveData
  - sp_encryptAllUserData
  - sp_encryptApplicantData
  - sp_encryptBusinessEmployeeData
  - sp_encryptBusinessManagerData
  - sp_encryptCollectorData
  - sp_encryptEmployeeData
  - sp_encryptExistingStaffData
  - sp_encryptInspectorData
  - sp_encryptSpouseData
  - sp_encryptStallholderData
  - sp_encrypt_all_applicants
  - sp_encrypt_all_business_employees
  - sp_encrypt_all_business_managers
  - sp_encrypt_all_collectors
  - sp_encrypt_all_inspectors
  - sp_encrypt_all_spouses
  - sp_encrypt_all_stallholders
  - sp_encrypt_stallholder
  - sp_endEmployeeSession
  - sp_endStaffSession
  - sp_ensureComplaintTableExists
  - sp_generate_receipt_number
  - sp_getActiveRefreshToken
  - sp_getActivitySummaryByAction
  - sp_getActivitySummaryByType
  - sp_getAdminById
  - sp_getAllApplicantDocuments
  - sp_getAllApplicantDocumentsWithData
  - sp_getAllApplicantsDecrypted
  - sp_getAllCollectors
  - sp_getAllCollectorsDecrypted
  - sp_getAllCredentials
  - sp_getAllEmployeesAll
  - sp_getAllEmployeesByBranches
  - sp_getAllInspectorsDecrypted
  - sp_getAllParticipants
  - sp_getAllPaymentsByStallholder
  - sp_getAllSections
  - sp_getAllSpousesDecrypted
  - sp_getAllStaffActivities
  - sp_getAllStallholdersAll
  - sp_getAllStallholdersAllDecrypted
  - sp_getAllStallholdersByBranchesDecrypted
  - sp_getAllStallImages
  - sp_getAllStallImagesWithData
  - sp_getAllStallsForLanding
  - sp_getAllStalls_complete
  - sp_getAllStalls_complete_decrypted
  - sp_getApplicantById
  - sp_getApplicantByIdDecrypted
  - sp_getApplicantDetailsForComplaintDecrypted
  - sp_getApplicantDocumentBlob
  - sp_getApplicantDocumentBlobById
  - sp_getApplicantDocumentByTypeExtended
  - sp_getAppliedAreasForApplicant
  - sp_getAvailableAreas
  - sp_getAvailableAreasForApplicant
  - sp_getAvailableMarkets
  - sp_getAvailableStallsForApplicant
  - sp_getBranchById
  - sp_getBranchDocRequirementsFull
  - sp_getBranches
  - sp_getBranchIdForEmployee
  - sp_getBranchIdForManager
  - sp_getBranchIdsForOwner
  - sp_getBranchInfoWithManager
  - sp_getBranchManagerById
  - sp_getBranchManagerByUsername
  - sp_getBranchManagerForCurrentUser
  - sp_getBusinessEmployeeByUsername
  - sp_getBusinessEmployeesAllDecrypted
  - sp_getBusinessEmployeesByBranchDecrypted
  - sp_getBusinessEmployeeWithBranch
  - sp_getBusinessInfoByApplicantId
  - sp_getBusinessManagerByUsername
  - sp_getBusinessManagersAllDecrypted
  - sp_getBusinessManagerWithBranch
  - sp_getCollectorBranchAssignment
  - sp_getCollectorByIdDecrypted
  - sp_getCollectorByUsername
  - sp_getCollectorsAll
  - sp_getCollectorsAllDecrypted
  - sp_getCollectorsByBranch
  - sp_getCollectorsByBranchDecrypted
  - sp_getCollectorsForMobileDecrypted
  - sp_getComplaintById
  - sp_getComplaintsByStallholder
  - sp_getComplaintsByStallholderDecrypted
  - sp_getCredentialWithApplicant
  - sp_getDecryptedApplicant
  - sp_getDecryptedBusinessManager
  - sp_getDecryptedCollectorForLogin
  - sp_getDecryptedEmployee
  - sp_getDecryptedEmployeeForLogin
  - sp_getDecryptedInspectorForLogin
  - sp_getDecryptedStallholder
  - sp_getDecryptedStallholderFull
  - sp_getDocumentById
  - sp_getDocumentsByStallholderId
  - sp_getDocumentTypeByName
  - sp_getEmployeeWithBranchInfo
  - sp_getFilteredStalls
  - sp_getFloorsByBranch
  - sp_getFloorsByBranches
  - sp_getFullStallholderInfo
  - sp_getInspectorBranchAssignment
  - sp_getInspectorByIdDecrypted
  - sp_getInspectorByUsername
  - sp_getInspectorsAll
  - sp_getInspectorsAllDecrypted
  - sp_getInspectorsByBranch
  - sp_getInspectorsByBranchDecrypted
  - sp_getInspectorsForMobileDecrypted
  - sp_getLandingPageFilterOptions
  - sp_getLandingPageStallholdersList
  - sp_getLandingPageStallsList
  - sp_getLandingPageStats
  - sp_getLatestApplicationByApplicantId
  - sp_getLatestApplicationInfo
  - sp_getLocationsByArea
  - sp_getMobileUserByUsername
  - sp_getMostActiveStaff
  - sp_getNextStallImageOrder
  - sp_getNextStallImageOrderMobile
  - sp_getOnlinePaymentsAllDecrypted
  - sp_getOnlinePaymentsByBranchesDecrypted
  - sp_getOnlinePaymentsDecrypted
  - sp_getOnsitePaymentsAll
  - sp_getOnsitePaymentsAllDecrypted
  - sp_getOnsitePaymentsByBranches
  - sp_getOnsitePaymentsByBranchesDecrypted
  - sp_getOnsitePaymentsDecrypted
  - sp_getOtherInfoByApplicantId
  - sp_getPaymentCountByStallholder
  - sp_getPaymentsByStallholderPaginated
  - sp_getPaymentStatsAll
  - sp_getPaymentStatsByBranches
  - sp_getPaymentSummaryByStallholder
  - sp_getPenaltyPayments
  - sp_getPenaltyPaymentsCount
  - sp_getRecentFailedActions
  - sp_getRefreshTokenByHash
  - sp_getRemainingImagesForReorder
  - sp_getRemainingStallImages
  - sp_getSectionsByBranch
  - sp_getSectionsByBranches
  - sp_getSpouseByApplicantId
  - sp_getStaffActivityById
  - sp_getStaffSession
  - sp_getStallByIdForLanding
  - sp_getStallDetailForApplicant
  - sp_getStallFirstImage
  - sp_getStallholderByApplicantId
  - sp_getStallholderByIdDecrypted
  - sp_getStallholderDetailByIdWithBranch
  - sp_getStallholderDetailsForComplaintDecrypted
  - sp_getStallholderDocumentBlob
  - sp_getStallholderDocumentBlobById
  - sp_getStallholderDocumentSubmissionBlob
  - sp_getStallholderIdByApplicant
  - sp_getStallholderPaymentHistory
  - sp_getStallholderStallsForDocuments
  - sp_getStallholderUploadedDocuments
  - sp_getStallIdFromImage
  - sp_getStallImageById
  - sp_getStallImageByOrder
  - sp_getStallImageByPosition
  - sp_getStallImageCount
  - sp_getStallImageCountMobile
  - sp_getStallImageDataById
  - sp_getStallImageForDelete
  - sp_getStallImageInfoById
  - sp_getStallImages
  - sp_getStallImagesPublic
  - sp_getStallImagesWithData
  - sp_getStallPrimaryImage
  - sp_getStallsByAreaForApplicant
  - sp_getStallsByAreaOrBranch
  - sp_getStallsByLocation
  - sp_getStallsByTypeForApplicant
  - sp_getSystemAdminById
  - sp_getSystemAdminByUsername
  - sp_getViolationTypes
  - sp_get_all_stallholders_decrypted
  - sp_get_applicants_decrypted
  - sp_get_business_employees_decrypted
  - sp_get_business_managers_decrypted
  - sp_get_collectors_decrypted
  - sp_get_inspectors_decrypted
  - sp_get_spouses_decrypted
  - sp_get_stallholders_decrypted
  - sp_get_stallholder_details_decrypted
  - sp_heartbeatBusinessEmployee
  - sp_heartbeatBusinessManager
  - sp_heartbeatBusinessOwner
  - sp_heartbeatCollector
  - sp_heartbeatInspector
  - sp_heartbeatSystemAdmin
  - sp_insertApplicantDocumentBlob
  - sp_insertApplicantDocumentMulter
  - sp_insertApplicantEncrypted
  - sp_insertAuctionRecord
  - sp_insertAuctionResult
  - sp_insertBusinessManagerEncrypted
  - sp_insertComplaint
  - sp_insertDocumentSubmissionBlob
  - sp_insertEmployeeEncrypted
  - sp_insertRaffleRecord
  - sp_insertRaffleResult
  - sp_insertStaffActivityLog
  - sp_insertStallFull
  - sp_insertStallholderDocumentBlob
  - sp_insertStallImageBlob
  - sp_insertStallImageBlobMobile
  - sp_logCollectorAction
  - sp_logInspectorAction
  - sp_logoutEmployee
  - sp_logStaffActivity
  - sp_logStaffActivityLogin
  - sp_logStaffActivityLogout
  - sp_logTokenActivity
  - sp_mobileStaffLogin
  - sp_resetCollectorPassword
  - sp_resetInspectorPassword
  - sp_reviewStallholderDocument
  - sp_revokeRefreshTokenByHash
  - sp_searchStallsForApplicant
  - sp_setFirstImageAsPrimary
  - sp_setImageAsPrimary
  - sp_setNextPrimaryImage
  - sp_setStallImagePrimary
  - sp_setStallPrimaryImage
  - sp_storeRefreshToken
  - sp_submitComplaint
  - sp_terminateCollector
  - sp_terminateEmployee
  - sp_terminateInspector
  - sp_unsetAllPrimaryImages
  - sp_unsetStallPrimaryImages
  - sp_unsetStallPrimaryImagesMobile
  - sp_updateApplicantDocumentBlob
  - sp_updateApplicantDocumentMulter
  - sp_updateApplicantDocumentVerification
  - sp_updateApplicantEncrypted
  - sp_updateBusinessEmployeeLastLoginNow
  - sp_updateBusinessEmployeeLastLogout
  - sp_updateBusinessEmployeeLastLogoutNow
  - sp_updateBusinessManagerLastLoginNow
  - sp_updateBusinessManagerLastLogout
  - sp_updateBusinessManagerLastLogoutNow
  - sp_updateBusinessOwnerLastLoginNow
  - sp_updateBusinessOwnerLastLogout
  - sp_updateBusinessOwnerLastLogoutNow
  - sp_updateCollectorLastLogin
  - sp_updateComplaintStatus
  - sp_updateCredentialLastLogout
  - sp_updateDocumentSubmissionBlob
  - sp_updateImageDisplayOrder
  - sp_updateInspectorLastLogin
  - sp_updateRefreshTokenLastUsed
  - sp_updateStaffSession
  - sp_updateStallholderDocumentBlob
  - sp_updateStallholderDocumentVerification
  - sp_updateStallholderEncrypted
  - sp_updateStallImageBlob
  - sp_updateStallImageBlobData
  - sp_updateStallImageOrder
  - sp_updateSystemAdminLastLoginNow
  - sp_updateSystemAdminLastLogout
  - sp_uploadStallholderDocument
  - sp_validateFloorSectionBranch
  - sp_verifyStallExistsMobile
  - updateApplicant
  - updateBusinessEmployee
  - updateBusinessEmployeeLastLogin
  - updateBusinessManager
  - updateBusinessManagerLastLogin
  - updateCollector
  - updateCollectorLastLogin
  - updateCredentialLastLogin
  - updateFloor
  - updateInspector
  - updateInspectorLastLogin
  - updateSection
  - updateStall
  - updateStallholder
  - updateSubscriptionPayment

FUNCTIONS:
  - fn_getPhilippineTime
  - fn_philippine_now

TRIGGERS:
  - before_stallholder_insert
  - before_stallholder_update

EVENTS:
  - reset_monthly_payment_status
